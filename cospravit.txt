Ked nejde git push, skus v terminaly AS:
git config credential.helper store

--------------------------------
Hadanie warningov v kode:
Toto hladaj:
@SuppressLint
@SuppressWarnings
//noinspection

--------------------------------

Preco uz nie je PPP v GPlay:

Google restrictions:
1. Android - All Wi-Fi related functions not working since Android 10.
2. Google Play - Google require (currently) Android 10+ for applications. In application exists gradle configuration parameter:
    targetSdkVersion targetSdk
  and in PPP must be target sdk = 28. Android 10 is 29.

In stores, in which is currently deployed PPP, restriction about target sdk not exists.

----------------------------------------

indicator color and its complementary color:
dark tema: indicator:62a9f8 -> accent:f8b162 -> event delay:#F862F4
light tema: indicator:4289d8 -> accent:cc893e -> event delay:#D842D4

https://www.canva.com/colors/color-wheel/

------------------------

Widget Preview Builder:
https://play.google.com/store/apps/details?id=lav.widgetpreviewbuilder.free&hl=en_US&gl=US

------------------------
funkční nastavení pro Huawei P30 s Androidem 10 a EMUI 10.

nastavení-aplikace- aplikace-PPP-podrobnosti o spotřebě energie-spouštění aplikací:
Spravovat automaticky - ne
Spravovat ručně 3x ano
-automatické souštění
-sekundární souštění
-Spustit na ozadí
------------------------

Ulohy, ktore su spravene [x] a ktore nie [ ]:
[ ] Priority Notification Event
[ ] Normal media volume, headphone media volume, Bluetooth media volume
[ ] Sony's "Stamina" mode as profile preference - skor Power save change senzor
[ ] USB connection to PC as storage device, USB connection to PC as camera, connection to USB stick in accessories parameter for events
[ ] option to hide PPP from Launcher
[ ] Set min and max CPU frequency
[ ] Open a website with profile
[ ] profile/event search
[ ] Persistent profile/event: sets its options every x minutes - asi periodic sensor
[ ] Android Wear support?
[ ] (AND, OR, XOR, NOT. Or at least NOT.)<-NOT is already available in most preferences. If that stays, that does the same.
[ ] a plugin system? (very small core app, ability to install additional event preferences, maybe only time event preinstalled)

------------------------

UNDO:
=====

Na "Undo profile" sa pouziva FIFO, je to vlastne zoznam profilov a udalosti v poradi, v akom sa aktivovali, spustili.

1. DataWrapper.fifoAddProfile()

PhoneProfilesService.doFirstStart() - PPApplication.prefLastActivatedProfle, 0
DataWrapper._activateProfile() - profileId (ktory sa aktivuje), 0
DataWrapper.activateProfileFromEvent() - profieId, event_id
Event.startEvent() - profileId, _id - ked nejde o merge profilov a nie je to manualna aktivacia z udalosti
Event.doActivateEndProfile() - profileId, _id - ked nejde o merge profilov a nie je to manualna aktivacia z udalosti

koniec udalosti, nie je manualne aktivovany profil:
EventsHandler.handleEvents() - defaultProfile, 0 - ak ide o aktivaciu default profilu, je nakonfigurovany
EventsHandler.handleEvents() - PPApplication.prefLastActivatedProfile, 0 - ak nie je nakonfigurovany default profile

koniec udalosti, je manualne aktivovany profil:
EventsHandler.handleEvents() - semiOldActivatedProfileId, 0 - ak je aktivovany daky profil
EventsHandler.handleEvents() - defaultProfile, 0 - ak nie je aktivovany daky profil a ide o aktivaciu default profilu, je nakonfigurovany
EventsHandler.handleEvents() - PPApplication.prefLastActivatedProfile, 0 - ak nie je aktivovany daky profil a nie je nakonfigurovany default profile

2. DataWrapper.fifoSaveProfiles()

DataWrapper.activateProfile() - pre STARTUP_SOURCE_FOR_FIRST_START - vyprazdni FIFO
EditorProfileListFragment.deleteProfile() - vymaze vymazavany profil z FIFO
EditorProfileListFragment.deleteAllProfiles() - vyprazdnenie FIFO
EventHlandler.handleEvents() - vyprazdnenie FIFO pri starte udalosti pred spustanim udalosti
PhoneProfilesService.doForFirstStart() - vyprazdnenie FIFO na prvy start, potom hned nasleduje pridanie PPApplication.prefLastActivatedProfile
PPApplication._exitApp() - vyprazdnenie FIFO na ukoncenie PPP


Ako sa robi UNDO:

Event.doActivateEndProfile() - ak je EATENDDO_UNDONE_PROFILE - pre merge an non-merge profiles
- Spravi sa zonznam FIFO udalosti, ktore nie su rovne ukoncovanej udalosti.
  Profily z ukoncovanej udalosti nas uz nezaujimaju, vsetky sa z FIFO vymazu.
- Z novovzniknuteho FIFO sa vezme posledny profil a ten sa aktivuje

ProfileDurationAlarmBroadcastReceiver._doWork() - ak je AFTER_DURATION_DO_UNDO_PROFILE
- Vymaze sa posledny profil z FIFO, j jedno, ci ma priradenu udalost
- Potom za z FIFO vezme posledny profil a ten sa aktivuje

------------------------

System.Settings:
notifications_use_ring_volume ---+--> ze by na odlinkovanie zvonenia a notifikacii?
unlink_volumes_together ---------+
mute_streams_affected
mode_ringer_streams_affected

System.Global:
heads_up_notifications_enabled

Ako disablovat lockscreen, 2 kroky:
1. nastavit, ze power tlacitko nema lockovat
  /data/system/locksettings.db - lockscreen.power_button_instantly_locks (0,1)
  len je otazka, ci toto existuje aj na starsich androidoch ako 5.0
2. nastavit lockscreen timeout 
  Settings.Secure - lock_screen_lock_after_timeout (milisekundy)

---------- PIN/password

1. ako zrusim pin/heslo

deviceManager.setPasswordMinimumLength(compName, 0);
boolean result = deviceManager.resetPassword("", DevicePolicyManager.RESET_PASSWORD_REQUIRE_ENTRY);

2. ako nahodim pin/heslo

DevicePolicyManager deviceManager = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
ComponentName compName = new ComponentName(MessageService.this, LockAdmin.class);  

boolean active = deviceManager.isAdminActive(compName);  

if (active) { 
  deviceManager.setPasswordQuality(compName,DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED);
  deviceManager.setPasswordMinimumLength(compName, 5);

  boolean result = deviceManager.resetPassword("blablabla", DevicePolicyManager.RESET_PASSWORD_REQUIRE_ENTRY);
}

3. password quality:

DevicePolicyManager.PASSWORD_QUALITY_SOMETHING - pattern lock?
DevicePolicyManager.PASSWORD_QUALITY_BIOMETRIC_WEAK - tvar, odtlacok prstu?
DevicePolicyManager.PASSWORD_QUALITY_NUMERIC - pin?
DevicePolicyManager.PASSWORD_QUALITY_ALPHABETIC - heslo?
DevicePolicyManager.PASSWORD_QUALITY_ALPHANUMERIC - heslo?
DevicePolicyManager.PASSWORD_QUALITY_COMPLEX - heslo?

--------------------------------

NFC tag senzor - NEFUNGUJE PRI CITANI TAGU NA POZADI!

ZE BY UZ OPRAVENE? DLHO SA NIKTO NESTAZOVAL.

Tu mas ako sa to id cita: https://gist.github.com/luixal/5768921.

- Sprav aby to len citalo UID a to pouzivaj na identifikaciu tagu.
  Takto precitas UID: https://gist.github.com/luixal/5768921
- Na nacitanie tagu v NFCTagPreference sa vytvori nova aktivita NFCTagReadEditorActivity.
  Ta bude normalna ako je teraz NFCTagWritreActivity, ktoru zahodim.
  Zobrazovat bude precitane UID tagu a aj jeho obsah.
  Aj citanie by malo zacat automaticky, ked prilozim tag ku mobilu.
- Pridanie tagu nech hned vyvola citanie UID
- Write to tag polozku menu tagu zrus a zamen za citanir UID tagu
- Premenovanie tagu teraz je nahovno, nespravi aj zapis dso tagu, ale po novom to bude OK ako to je.
- V tabulke TABLE_NFC_TAGS pribudne polozka KEY_NT_UID = "uid". Tam sa zapise precitane uid.
- Aby bola spatna kompatibilita so starymi tagmi, bude NFCTagReadActivity citat uid aj obsah tagu.
  Ak bude uid v tabulke KEY_NT_UID prazdne, pouzije sa ako teraz obsah tagu. Inac sa pouzije uid tagu.
- Pre NFCTagReadActivity zmenit v manifeste intent filter na tento:
    <intent-filter>
        <action android:name="android.nfc.action.TAG_DISCOVERED"/>
        <category android:name="android.intent.category.DEFAULT"/>
      </intent-filter>

----------------------

Direct boot:
- Asi nemozem spravit, nepodporuje to WorkManager. :-(
- toto je super na to, aby sa PPP startol aj pri uzamknutej obrazovke.
- android.intent.action.LOCKED_BOOT_COMPLETED vid:
    https://medium.com/@jordan_shifter/direct-boot-on-android-nougat-71f06c4a7c9e
- Ak nepuzijes direct boot, tak apka pada napr. v Fabric, android_job.
  To preto, lebo chcu pouzivat shared preferences a v uzamknutej obrazovke bez direct boot
  to spadne na IllegalStateException.

  Fabric, android-job uz nepouzivam, treba testnut s Firebase Crashlytics a WorkManager

- Ako spravit podporu Direct boot:
    https://developer.android.com/training/articles/direct-boot

- Len mam taky strasne blby pocit, ze neviem ako movnut shared preferences z device do credential storage.
  Vid:
    https://developer.android.com/reference/android/content/Context#moveSharedPreferencesFrom(android.content.Context,%20java.lang.String)
    https://developer.android.com/reference/android/content/Context#moveDatabaseFrom(android.content.Context,%20java.lang.String)
  Alebo, ze by pomohlo toto?
    https://stackoverflow.com/questions/51377089/android-crashlytics-fails-on-direct-boot-due-to-disk-encryption


--------------

Start udalosti:
1. Start s delay nastavi alarm pre SENSOR_TYPE_EVENT_DELAY_START a NENASTAVI event._status na ESTATUS_RUNNING, necha ho ESTATUS_PAUSE
2. Po delay znova testuje, ci sa zmeni stav udalosti a tiez ci event._isInDelayStart je uz false. Az tu vola startEvemt(), cize nastavi ESTATUS_RUNNING.
Vysledok je, ze pocas delay je stale PAUSE az po delay je RUNNING.

Koniec udalosti:
1. Koniec s delay nastavi alarm pre SENSOR_TYPE_EVENT_DELAY_END a NENASTAVI event._status na ESTATUS_PAUSE, necha ho ESTATUS_RUNNING
2. Po delay znova testuje, ci sa zmeni stav udalosti a tiez ci event._isInDelayEnd je uz false. Az tu vola pauseEvemt(), cize nastavi ESTATUS_PAUSE.
Vysledok je, ze pocas delay je stale RUNNING az po delay je PAUSE.

-----------------

Battery historian:
1. sudo apt install docker.io
2. Ako pouzivat: https://developer.android.com/topic/performance/power/setup-battery-historian
3. Spustaj ale takto:
      sudo docker run -p 20000:9999 gcr.io/android-battery-historian/stable:3.0 --port 9999
4. V Chrome potom: http://localhost:20000

------------------

mám funkční nastavení pro Huawei P30 s Androidem 10 a EMUI 10.

nastavení-aplikace- aplikace-PPP-podrobnosti o spotřebě energie-spouštění aplikací:
Spravovat automaticky - ne
Spravovat ručně 3x ano
-automatické souštění
-sekundární souštění
-Spustit na ozadí
třeba se to bude hodit.

-------------------------

ActivateProfileHelper.setScreenTimeout()
- disableScreenTimeoutInternalChange = true;
- pre kazdy timeout z parametra:
	if (PPApplication.lockDeviceActivity != null)
	    // in LockDeviceActivity.onDestroy() will be used this value to revert back system screen timeout
	    PPApplication.screenTimeoutBeforeDeviceLock = 15000;
	else {
      	    Settings.System.putInt(appContext.getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, xxx);
      	}
- nerobi 6, 8. Preco?
- zavola:
        setActivatedProfileScreenTimeout(appContext, 0);
- zavola work:
	DisableScreenTimeoutInternalChangeWorker.class

- volane z:
  - ActivateProfileHelper.execute() - aktivacia profilu ak je obrazovka zapnuta
  - LockDeviceActivity.onDestroy() - na nastavenie timeoutu, ak sa este nenastavil
  - ScreenOnOffBroadcastReceiver.onReceive() na ACTION_USER_PRESENT

ActivateProfileHelper.setActivatedProfileScreenTimeout()
- ulozi do shared preferences timeout.
- ulozi to aj do ApplicationPreferences.prefActivatedProfileScreenTimeout
- pouzije to v ScreenOnOffBroadcastReceiver.onReceive() na ACTION_USER_PRESENT
- pouzije to aj v LockDeviceActivity.onDestroy() na vratenie timeoutu

- volane je z:
  - ActivateProfileHelper.setScreenTimeout() - nastavi 0, lebo netreba nastavovat na screen On ACTION_USER_PRESENT
  - ActivateProfileHelper.execute - nastavi profile parameter _deviceScreenTimeout, ak je screen off
  - SettingsContentObserver.onChange() - nastvi 0 ak posledny zapamatany timeout je iny ako aktualny. a  nie je to internalChange
                                                  ActivateProfileHelper.disableScreenTimeoutInternalChange
                                         to aby sa nepouzila na ten screen On ACTION_USER_PRESENT. Tu sa predpoklada, ze zmena prisla z vonka.

premenna PPApplication.screenTimeoutBeforeDeviceLock:
- tu si pamatam, aky timeout je pred spustenim LockDeviceActivity.
- na onCreate() ho zistuje
- na onDestroy() nastavi spat timeout na tuto odpamatanu hodnotu
- na onDestroy() potom nastavi timeot na hodnotu ApplicationPreferences.prefActivatedProfileScreenTimeout.


Takto sa nastavuje tiemout pri aktivacii profilu:
        // screen timeout
        if (Permissions.checkProfileScreenTimeout(appContext, profile, null)) {
            if (PPApplication.isScreenOn) {
                if (PPApplication.screenTimeoutHandler != null) {
                    PPApplication.screenTimeoutHandler.post(() -> {
                        setScreenTimeout(profile._deviceScreenTimeout, appContext);
                    });
            }
            else {
                setActivatedProfileScreenTimeout(appContext, profile._deviceScreenTimeout);
            }
        }
- cize ak je screen on, nastavi sa timeount hned.
- ak je screen off, nastavi sa timeount az v ScreenOnOffBroadcastReceiver.onReceive() na ACTION_USER_PRESENT
  cize len sa hodnota ulozi do ApplicationPreferences.prefActivatedProfileScreenTimeout.
Toto cele chapem.

-----------------------

Zmena hlasitosti profilom:

Toto su parametre:
forRingerMode -> true, ak menim aj ringer mod?
- ak profil meni ringer mod, ton zvonenia, notifikacie, systemu, DTMF, tak je true
- inac je false
forProfileActivation -> true ak volam pre aktivaciu profilu?
- ak je volane z ActivateProfileHelper.execute(), je true, cize ano ide o aktivaciu profilu
- ak je volane z PhoneCallListener.setLinkUnlinkNotificationVolume() je false, cize je to pocas hovoru
  aby sa vykonal unlink.

setRingerVolume(appContext, profile.getVolumeRingtoneValue()); -> pozri co za premennu to nastavuje
- ApplicationPreferences.prefRingerVolume
  meni sa pri starte PPP, pri aktivacii profilu, pri zmene hlasitosti zvonenia v systeme
setNotificationVolume(appContext, profile.getVolumeNotificationValue()); -> pozri co za premennu to nastavuje
- ApplicationPreferences.prefNotificationVolume
  meni sa pri starte PPP, pri aktivacii profilu, pri zmene hlasitosti notifikacii v systeme
  meni sa aj na hlaitost zvonenia pri unlinku, podla mna preto, lebo v podstate je len 1 volume
  pri zmerovananych hlasitostiach, tak nech su rovnake.

-> Len ak je system ringer mode audible, alebo ak ApplicationPreferences.prefRingerMode=0
-> ringerMode == 0 znamena, ze je nenastaveny. Ide o ringer mod podla Profile.RINGERMODE_*
if (isAudibleSystemRingerMode(audioManager, systemZenMode/*, appContext*/) || (ringerMode == 0)) {

...

  -> tu zistujem ci ma zlinkovane (merged) ringing a notificartion
     vrati to:
       if (ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes > 0)
         ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes == 1
         - cize ak je natrdo v Settongs, ze ma zmergovane
       else
       	 ApplicationPreferences.prefMergedRingNotificationVolumes
     cize v podstate bud ak uzivatel nastavil natvrdo, ze ma zmergovane alebo a detekcia vratila, ze ma zmergovane
  if (ActivateProfileHelper.getMergedRingNotificationVolumes() &&
      ApplicationPreferences.applicationUnlinkRingerNotificationVolumes) {
    -> ma zmergovane a ma zapnuty unlink
    ...
  } else {

    -> tu zistujem ci ma zlinkovane (merged) ringing a notificartion
       vrati to:
         if (ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes > 0)
           ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes == 1
           - cize ak je natrdo v Settongs, ze ma zmergovane
         else
         	 ApplicationPreferences.prefMergedRingNotificationVolumes
       cize v podstate bud ak uzivatel nastavil natvrdo, ze ma zmergovane alebo a detekcia vratila, ze ma zmergovane
    if (!ActivateProfileHelper.getMergedRingNotificationVolumes()) {
     -> nie je zmergovane
      ...
      -> nastavuje hlasitost notifikacie, ale z ApplicationPreferences.prefNotificationVolume
         nastavi sa hore na zaciatku
      volume = ApplicationPreferences.prefNotificationVolume;
    }

    -> nastavuje hlasitost zvonenia, ale z ApplicationPreferences.prefRingerVolume
       nastavi sa hore na zaciatku
    volume = ApplicationPreferences.prefRingerVolume;
    -> zapisuje sa aj do servisu, NACO?
    PhoneProfilesService.getInstance().ringingVolume = volume;
  ...

  }
...

}

    static void getMergedRingNotificationVolumes(Context context) {
        synchronized (PPApplication.profileActivationMutex) {
            ApplicationPreferences.prefMergedRingNotificationVolumes =
                    ApplicationPreferences.getSharedPreferences(context).getBoolean(PREF_MERGED_RING_NOTIFICATION_VOLUMES, true);
        }
    }
    static boolean getMergedRingNotificationVolumes() {
        if (ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes > 0)
            return ApplicationPreferences.applicationForceSetMergeRingNotificationVolumes == 1;
        else
            return ApplicationPreferences.prefMergedRingNotificationVolumes;
    }

Ak v Settings menim ringtone na Pixeli, meni sa STREAM_RING aj STREAM_NOTIFICATION
Ale ako pozeram, tak sa to ignoruje, tie zmeny v observeri, lebo prave aktivujem porfil.
To je to, co to ma aj robit.
Tak preco kua to na tej Xperii robi inac? Jedine mi zostava to testnut u Marta. Logovat si to.

------------------

Night mode - cize zlty film:
Pozeraj toto:
/home/henrisko/Stiahnuté/Tweaker-master/app/src/main/java/com/zacharee1/systemuituner/views/NightModeView.kt
/home/henrisko/Stiahnuté/Tweaker-master/app/src/main/java/com/zacharee1/systemuituner/services/tiles/NightModeTile.kt
/home/henrisko/Stiahnuté/Tweaker-master/app/src/main/java/com/zacharee1/systemuituner/prefs/NightModePreference.kt

Je to aplikacia SysteUI Tunner. Mas ho v S10.

--------------

Vyskusaj nahodit mobilne data s WRITE_SECURE_SETTINGS:
NEFUNGUJE :-(
boolean r1 = android.provider.Settings.Global.putInt(getContentResolver(), "mobile_data", r4) // r4 = 1 - zapnut, 0 - vypnut
boolean r1 = android.provider.Settings.Global.putInt(getContentResolver(), "mobile_data1", r5)  // r5 = 1 - zapnut, 0 - vypnut
boolean r1 = android.provider.Settings.Global.putInt(getContentResolver(), "mobile_data2", r5)  // r5 = 1 - zapnut, 0 - vypnut

--------------------

Night light (blue light filter):

Vypada to, ze takto sa to robi:

if (isActive) {
    if (Build.VERSION.SDK_INT == Build.VERSION_CODES.N) { // API 24, ale skontroluj
        prefManager.saveOption(SettingsType.SECURE, "twilight_mode", 0)
        writeSecure("twilight_mode", 0)
    } else {
        prefManager.saveOption(SettingsType.SECURE, "night_display_activated", 0)
        writeSecure("night_display_activated", 0)
    }
} else {
    if (Build.VERSION.SDK_INT == Build.VERSION_CODES.N) { // API 24, ale skontroluj
        prefManager.saveOption(SettingsType.SECURE, "twilight_mode", 1)
        writeSecure("twilight_mode", 1)
    } else {
        prefManager.saveOption(SettingsType.SECURE, "night_display_activated", 1)
        writeSecure("night_display_activated", 1)
    }
}

fun Context.writeSecure(key: String?, value: Any?): Boolean {
    if (key.isNullOrBlank()) return false
    return try {
        Settings.Secure.putString(contentResolver, key, value?.toString())
        true
    } catch (e: SecurityException) {
        false;
    }
}

const val TWILIGHT_MODE = "twilight_mode"
const val NIGHT_DISPLAY_ACTIVATED = "night_display_activated"
const val NIGHT_DISPLAY_AUTO_MODE = "night_display_auto_mode"
const val NIGHT_DISPLAY_COLOR_TEMPERATURE = "night_display_color_temperature"
// tiet dve este musim zistit, ci vobec vie nastavit.
// v aplikacii to nie je
const val NIGHT_DISPLAY_CUSTOM_START_TIME = "night_display_custom_start_time"
const val NIGHT_DISPLAY_CUSTOM_END_TIME = "night_display_custom_end_time"

// pre API 24
writeSecure(NightModeView.TWILIGHT_MODE, info.twilightMode)

// pre API 25+
writeSecure(NightModeView.NIGHT_DISPLAY_ACTIVATED, info.nightModeActivated)
writeSecure(NightModeView.NIGHT_DISPLAY_AUTO_MODE, info.nightModeAuto)
writeSecure(NightModeView.NIGHT_DISPLAY_COLOR_TEMPERATURE, info.nightModeTemp)

Zdroj: https://github.com/zacharee/Tweaker/blob/master/app/src/main/java/com/zacharee1/systemuituner/services/tiles/NightModeTile.kt

Bude potrebovat WRITE_SECURE_SETTINGS.
Testovane cez System UI Tuner s grantnutym WRITE_SECURE_SETTINGS na Pixel 3a.

---
Testni to potom este na Samsungu, ci to ide. Neviem, niekde som cital, ze to zhasne obrazovku
a pomoze len restart mobilu. Len neviem ci to bolo pri tomto.
!!! Hm, tak ako som pisal. Na Samsungu to zhaslo obrazovku.
!!! Aj ked zmenim len automaticke zapinanie.
!!! Takze toto urcite nemozem spravit.
!!! Ale? Mozno System UI tuner zapise len pri zmene automatiky aj to zapnutie. A to je mozno problem.
!!! Testni, testni testni.

Mozno taky test tam dat, ze nech si uzivatel skusi a za par sekund vrati, teda ak to pojde.
Vyskusaj aj to. Testuj na Galaxy S10.
Ak to vrati, tak potom to sprav tak, ze uzivatel musi cez test dako prejst. A len ak potvrdi
(najlepsie 2x) ze to nezhaslo obrazovku, tak to nastav ako povolene.

Cize sprav na to dialog s tymi 3 parametrami:
1. nemenit/zapnut/vypnut
2. automaticke zapinanie
3. teplota farby
4. Test tlacitko a len ak ho potvrdi, tak povolit OK.
   To s tym OK, to treba ten preference spravit dako inac nez obycajne.
   S pouiztim public Dialog onCreateDialog(Bundle savedInstanceState)
---

Toto je, ked to hore nepojde. Cize zavolanie Settings. Take uz mam pri nejakych parametroch profilu:

ACTION_NIGHT_DISPLAY_SETTINGS

Zdroj: https://developer.android.com/reference/android/provider/Settings#ACTION_NIGHT_DISPLAY_SETTINGS

Sprav aspon toto, lebo na Galaxy mi to hore vyplo obrazovku. :-(

------------------

EventsHandler.handleEvents()
- volane strasne vela krat zaujima ma restart udalosti a samotny orientacny senzor
- SENSOR_TYPE_DEVICE_ORIENTATION
  - z OrientationScanner.runEventsHandlerForOrientationChange() - zisti, aky thread to pouziva
  - z PPPExtenderBroadcastRecveiver.onReceive() - je to volane v HandlerThread - vroadcast treba, lebo senzor sleduje aplikacie na popredi

------------------------

sprav notifikaciu ako dasboard, kde budu ikony profilov, klikom na ikonu sa profil aktivuje.
   poradie bude take iste ako pro aktivatore. Ak sa nezmestia na jednu notifikaciu, spravit dalsiu.
   Notifikacia bude mat prioritu nastavitelnu, default bude Minimal. Uzivatel si bude moct zmenit, aby sa
   takat notifikacia zobrazila aj v lockscreene. ;-)

--------

Orientation sensor:
Light senzor sa generuje hrozne casto. Na Samsungu donekonecna a par krat za sekundu.
Spravil som sice:
- ze sa neregistruje, ak ziadna udalost ho nepouziva
- ze sa ma handler volat az o polovicu intervalu
Ale aj tak to musi zrat vela. Kazdych 5 sekund volat eventsHandler je proste vela.
Zatial mam nenapadlo, co s tym. Do nastaveni senzora daj aspon info preference o tom ze check light zerie bateriu.

-----------------------

Vraj synchronizacia kontaktov. Testuje sa tam ContactsContract.Contacts.CONTACT_LAST_UPDATED_TIMESTAMP
A len novsie ako posledna synchronizacia (zapisat si treba cas poslednej do sharend preferences),
sa synchronizuju.
Ono to urychli synchronizaciu, to je pravda. Mozno by bolo super to takto spravit, len je to
vela prerabky celej sychronizacie kontaktov aj grup.

https://stackoverflow.com/questions/24968901/android-observer-updated-contacts

--------------------

Detekcia VPNky:

PhoneProfilesService.registerAllTheTimeCallbacks(), ale sprav speci len pre tento senzor, pozri ine
ako sa robi.

Cize callback na to by malo ist pridat. Staci pouzit:
.addTransportType(NetworkCapabilities.TRANSPORT_VPN)

A na detekciu v doHandleEvent:

Network activeNetwork = connectivityManager.getActiveNetwork();
NetworkCapabilities caps = connectivityManager.getNetworkCapabilities(activeNetwork);
boolean vpnInUse = caps.hasTransport(NetworkCapabilities.TRANSPORT_VPN);
- toto vyuzijem aj pre Profile._deviceVPN, kde pridam, ci chce
  nastavovat aj ked uz ma nastavene (cize vlastne restartnut). Dobre pre vyriesenie problemu
  uzivatela, co sa stazoval, ze mu to restartuje (vypne/zapne VPN), co nechce aby robilo.

Vid: https://stackoverflow.com/questions/28386553/check-if-a-vpn-connection-is-active-in-android

------------------

Co tak uplne nahradit HandlerThread Executorom?

ExecutorService es = Executors.newFixedThreadPool( 3 ) ;  // Specify number of threads.
Thready zostanu zive, pripadne sa replacnu pri chybe.

Existuje podobne a to funguje tak ze si vytvara thready po svojom, mnozstvo nie je dolezite.
ExecutorService es = Executors.newCachedThreadPool() ;
Tu thread po asi minute, ak uz nie je treba (nebezi nic v nom) sa zrusi.

Otazne ale je, ako to bude, s akou prioritou. Lebo tu som malicko navysoval:
handlerThread = new HandlerThread("PPHandlerThread", THREAD_PRIORITY_MORE_FAVORABLE);

Ze by takto? Zavolat priamo v Runnable?
Thread.currentThread().setPriority([1..5]);

Alebo zlozitejsie:
    private ScheduledExecutorService schdExctr = Executors.newSingleThreadScheduledExecutor(new ThreadFactory() {
        private ThreadFactory defaultThreadFactory = Executors.defaultThreadFactory();

        @Override
        public Thread newThread(Runnable r) {
            Thread t = defaultThreadFactory.newThread(r);
            t.setPriority(Thread.MIN_PRIORITY);
            return t;
        }
    });
Cize treba custom ThreadFactory priradit.
Hm, zaujimave. :-)

Vid: https://stackoverflow.com/questions/59100491/short-but-frequent-jobs-handlerthread-or-threadpoolexecutor
"HandlerThread is a structure that creates a singular thread and uses a queue to execute tasks
!!! but always loops and waits for messages which consumes power !!!,
while ThreadPoolExecutor creates multiple threads for each job and deletes threads when the jobs are done,"

Hm, hm.

-------------------

Broadcasty pre alarmy:

setExactAndAllowWhileIdle():
PPApplication.ACTION_CHECK_CRITICAL_GITHUB_RELEASES
x                PPApplication.checkCriticalPPPReleasesBroadcastReceiver = new CheckCriticalPPPReleasesBroadcastReceiver();
PPApplication.ACTION_CHECK_GITHUB_RELEASES
x                PPApplication.checkPPPReleasesBroadcastReceiver = new CheckPPPReleasesBroadcastReceiver();
PPApplication.ACTION_CHECK_REQUIRED_EXTENDER_RELEASES
x                PPApplication.checkRequiredExtenderReleasesBroadcastReceiver = new CheckRequiredExtenderReleasesBroadcastReceiver();
PPApplication.ACTION_DONATION
x                PPApplication.donationBroadcastReceiver = new DonationBroadcastReceiver();
PhoneProfilesService.ACTION_EVENT_DELAY_START_BROADCAST_RECEIVER
x                PPApplication.eventDelayStartBroadcastReceiver = new EventDelayStartBroadcastReceiver();
PhoneProfilesService.ACTION_EVENT_DELAY_END_BROADCAST_RECEIVER
x                PPApplication.eventDelayEndBroadcastReceiver = new EventDelayEndBroadcastReceiver();
PhoneProfilesService.ACTION_ALARM_CLOCK_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.alarmClockEventEndBroadcastReceiver = new AlarmClockEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_CALENDAR_EVENT_EXISTS_CHECK_BROADCAST_RECEIVER
x                    PPApplication.calendarEventExistsCheckBroadcastReceiver = new CalendarEventExistsCheckBroadcastReceiver();
PhoneProfilesService.ACTION_EVENT_CALENDAR_BROADCAST_RECEIVER
x                    PPApplication.eventCalendarBroadcastReceiver = new EventCalendarBroadcastReceiver();
PhoneProfilesService.ACTION_MISSED_CALL_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.missedCallEventEndBroadcastReceiver = new MissedCallEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_DEVICE_BOOT_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.deviceBootEventEndBroadcastReceiver = new DeviceBootEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_NFC_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.nfcEventEndBroadcastReceiver = new NFCEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_NOTIFICATION_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.notificationEventEndBroadcastReceiver = new NotificationEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_PERIODIC_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.periodicEventEndBroadcastReceiver = new PeriodicEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_SMS_EVENT_END_BROADCAST_RECEIVER
x                    PPApplication.smsEventEndBroadcastReceiver = new SMSEventEndBroadcastReceiver();
PhoneProfilesService.ACTION_EVENT_TIME_BROADCAST_RECEIVER
x                    PPApplication.eventTimeBroadcastReceiver = new EventTimeBroadcastReceiver();
PhoneProfilesService.ACTION_LOCATION_SCANNER_SWITCH_GPS_BROADCAST_RECEIVER
x                        PPApplication.locationScannerSwitchGPSBroadcastReceiver = new LocationScannerSwitchGPSBroadcastReceiver();
PhoneProfilesService.ACTION_PROFILE_DURATION_BROADCAST_RECEIVER
x                PPApplication.profileDurationAlarmBroadcastReceiver = new ProfileDurationAlarmBroadcastReceiver();
PhoneProfilesService.ACTION_RUN_APPLICATION_DELAY_BROADCAST_RECEIVER
x                PPApplication.runApplicationWithDelayBroadcastReceiver = new RunApplicationWithDelayBroadcastReceiver();
PhoneProfilesService.ACTION_START_EVENT_NOTIFICATION_BROADCAST_RECEIVER
x                PPApplication.startEventNotificationBroadcastReceiver = new StartEventNotificationBroadcastReceiver();
TwilightScanner.ACTION_UPDATE_TWILIGHT_STATE
x

-------------------

Brightness:

Index = co znamena
-----
0 = level
1 = menit, nememnit
2 = automatic
3 = from shared profile
4 = menit level

OnePlus, Android 12:
brightniss 0%:
2022-08-12 20:37:10.360 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-12 20:37:10.360 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-12 20:37:10.360 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=16.0

brightness 100%:
2022-08-12 20:37:46.257 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-12 20:37:46.257 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-12 20:37:46.257 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=8191.0

brightness 50%:
2022-08-12 20:38:39.122 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-12 20:38:39.122 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=128
2022-08-12 20:38:39.122 27607-27701/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=4082.0

Nexu 5, Android 7.1

manual 0:
2022-08-13 16:10:12.720 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:10:12.720 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 16:10:12.721 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.6044922

manual 100:
2022-08-13 16:10:45.466 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:10:45.466 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:10:45.466 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.6044922

manual 50:
2022-08-13 16:11:32.191 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:11:32.191 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=128
2022-08-13 16:11:32.191 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.6044922

adaptive 0:
2022-08-13 16:12:05.977 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:12:05.977 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=138
2022-08-13 16:12:05.977 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 16:12:24.910 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:12:24.910 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=138
2022-08-13 16:12:24.910 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:12:43.630 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:12:43.630 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=138
2022-08-13 16:12:43.631 6014-6049/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

Linear oboje.
Meni bud normal alebo adaptive level, nikdy oboje

-------------

Honor 7a, Android 8.0

manual 0:
2022-08-13 16:18:12.545 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:18:12.546 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4
2022-08-13 16:18:12.546 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 16:18:41.695 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:18:41.696 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:18:41.696 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 16:19:20.053 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:19:20.054 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=86
2022-08-13 16:19:20.054 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 16:20:51.644 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:20:51.644 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4
2022-08-13 16:20:51.644 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.015686275

adaptive 100:
2022-08-13 16:21:47.057 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:21:47.057 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:21:47.057 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:22:03.693 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:22:03.693 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=88
2022-08-13 16:22:03.694 9188-9390/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.34509805

Exponencial oboje
Meni oboje, ale mozes menit adaptivny level.

--------------

Nexus 5x, Android 9.0

manual 0:
2022-08-13 16:26:13.345 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:26:13.345 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 16:26:13.345 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 16:26:41.646 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:26:41.647 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:26:41.647 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 16:27:05.824 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:27:05.824 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=30
2022-08-13 16:27:05.825 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 16:28:05.845 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:28:05.845 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 16:28:05.845 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 16:28:28.122 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:28:28.122 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:28:28.122 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:29:17.230 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:29:17.230 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=28
2022-08-13 16:29:17.230 5448-5562/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.25979874

Exponencial oboje
Meni oboje, ale mozes menit adaptivny level.

----------------

Huawei P40 lite, Android 10

manual 0:
2022-08-13 16:49:42.173 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:49:42.173 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4
2022-08-13 16:49:42.173 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 16:50:02.138 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:50:02.138 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=230
2022-08-13 16:50:02.138 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 16:50:40.960 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:50:40.960 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=82
2022-08-13 16:50:40.960 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 16:51:16.918 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:51:16.918 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4
2022-08-13 16:51:16.918 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.9652174

adaptive 100:
2022-08-13 16:51:41.142 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:51:41.142 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=230
2022-08-13 16:51:41.142 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:52:11.550 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:52:11.550 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=77
2022-08-13 16:52:11.550 15018-15335/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.3304348

Exponencial oboje
Meni oboje, ale mozes menit adaptivny level.

----------------
Xiaomi Redmi Note 9 pro, Android 11

manual 0:
2022-08-13 16:34:46.703 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:34:46.703 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=22
2022-08-13 16:34:46.703 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 16:35:29.449 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:35:29.449 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4095
2022-08-13 16:35:29.449 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 16:35:54.185 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:35:54.185 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=882
2022-08-13 16:35:54.185 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 16:36:23.849 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:36:23.849 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=22
2022-08-13 16:36:23.849 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 16:36:54.218 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:36:54.218 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=4095
2022-08-13 16:36:54.218 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:37:18.020 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:37:18.020 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=918
2022-08-13 16:37:18.020 17174-17288/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

Exponecial manualne
Adaptivne je uplne ze divne. Bud da -1 alebo 1 podla togo klam klikne, ci dozadu alebo dobredu. Cize to urcuje smer, nie level.
Level je dany manulanym levelom. Preco kua? Cize pre Xiaomi pouzivaj manual, na zmenu levelu adaptivneho.

--------------

Galaxy S10, Android 11

manual 0:
2022-08-13 17:15:40.741 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:15:40.741 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=0
2022-08-13 17:15:40.741 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 17:16:02.701 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:16:02.702 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:16:02.702 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 17:16:30.113 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:16:30.113 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=126
2022-08-13 17:16:30.113 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 17:16:58.466 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:16:58.466 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=0
2022-08-13 17:16:58.466 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 17:17:39.882 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:17:39.882 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:17:39.882 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 17:17:54.848 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:17:54.848 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=128
2022-08-13 17:17:54.848 3685-3863/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.15419605

Linear oboje
Meni oboje len v adaptivnom mode, ale mozes menit adaptivny level.

--------------

Pixel 3a, Android 12

manual 0:
2022-08-13 16:56:21.416 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:56:21.416 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 16:56:21.416 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 16:56:41.799 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:56:41.799 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:56:41.799 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 16:57:18.359 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 16:57:18.359 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=24
2022-08-13 16:57:18.359 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 16:58:16.656 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:58:16.656 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 16:58:16.656 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 16:58:39.551 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:58:39.551 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 16:58:39.551 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 16:59:10.294 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 16:59:10.294 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=23
2022-08-13 16:59:10.294 10516-10690/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.5401081

Exponencial oboje
Meni oboje, ale mozes menit adaptivny level.

--------------

Galaxy tab, Android 12

manual 0:
2022-08-13 17:23:01.663 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:23:01.663 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=10
2022-08-13 17:23:01.663 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 17:23:23.002 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:23:23.002 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:23:23.002 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 17:23:49.150 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:23:49.150 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=127
2022-08-13 17:23:49.150 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 17:24:18.642 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:24:18.642 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=10
2022-08-13 17:24:18.643 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.7352935

adaptive 100:
2022-08-13 17:24:53.401 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:24:53.401 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:24:53.401 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 17:25:40.470 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:25:40.470 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=127
2022-08-13 17:25:40.470 24016-24153/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.7724198

Linear manual, Exponencial adaptive.
Meni oboje len v adaptivnom mode, ale mozes menit adaptivny level.

--------------

Galaxy S21, Android 12

manual 0:
2022-08-13 17:33:26.079 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:33:26.079 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=0
2022-08-13 17:33:26.079 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 17:33:48.546 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:33:48.546 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:33:48.546 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 17:34:08.058 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:34:08.058 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=128
2022-08-13 17:34:08.058 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 17:34:40.925 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:34:40.925 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=0
2022-08-13 17:34:40.925 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 17:34:57.292 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:34:57.292 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=255
2022-08-13 17:34:57.292 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 17:35:46.703 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:35:46.704 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=83
2022-08-13 17:35:46.704 26169-26292/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.19559112

Linear oboje.
Meni oboje len v adaptivnom mode, ale mozes menit adaptivny level.

--------------

Pixel 6, Android 13 beta

manual 0:
2022-08-13 17:37:58.560 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:37:58.560 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 17:37:58.560 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 100:
2022-08-13 17:38:22.958 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:38:22.958 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=158
2022-08-13 17:38:22.958 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

manual 50:
2022-08-13 17:38:49.939 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=0
2022-08-13 17:38:49.939 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=16
2022-08-13 17:38:49.939 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=0.0

adaptive 0:
2022-08-13 17:39:30.579 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:39:30.579 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=1
2022-08-13 17:39:30.579 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-1.0

adaptive 100:
2022-08-13 17:39:59.196 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:39:59.196 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=158
2022-08-13 17:39:59.196 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=1.0

adaptive 50:
2022-08-13 17:40:19.396 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightnessMode=1
2022-08-13 17:40:19.396 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedBrightness=15
2022-08-13 17:40:19.396 22109-22152/sk.henrichg.phoneprofilesplus E/SettingsContentObserver.onChange: savedAdaptiveBrightness=-0.33538884

Exponencial oboje
Meni oboje len v adaptivnom mode, ale mozes menit adaptivny level.



-------------------
- Added support for Android 13.
- Changed PhoneProfilesPlus icon.
- Added monochrome launcher icon.
- Added dymanic colors support (Android 12+)
- Added support for Notifications permission (Android 13+).
- Added change of application language.
- Added "Enable periodic scanning" into profile parameters.
- Added "Dark mode" to profile.
- Added "VPN" parameter into profile preferences.
- Added event senzor "Roaming sensor".
- Added "VPN sensor" to event.
- Added "Share PPP settings", for example to Google Drive.
- Added parameter "Use dynamic colors" for widgets.
- Added "Background color - dark mode on", "Background color - dark mode off" for all widgets and Samsung Edge panel.
- Added parameter "Layout height" for Icon widget.
- Added application parameter for change of "Restart events" icon color.
- Added switch Wi-Fi in airplane mode for profile parameter "Wi-Fi".
- Added configuration activity for widgets and Samsung Edge panel.
- Added delete of Intents in "Run applications, shortcuts, Intents" editor.
- Added info how to configure airplane mode radios.
- Added News about recommendation of application notification configuration.
- Added News for "Choose language".
- Change: speed-up of PPP, less memory and battery consumption.
- Changes in GUI - layouts, colors, text sizees, rounded corners, icons, ...
- Change: start of PPService immediately at start of device.
- Change: important Extender version.
- Change: save event id, which activates profile. Also for "Undo the profile" and "Restart events" from end of events.
- Change: force location network provider when device is in power save mode.
- Change: get best provider, when is returned not any enabled provider,… but in power save mode force return network provider.
- Change: restart events with delay - added support for alarm clock.
- Change: Check immediately if sim card is inserted.
- Change: better native style of "Activated profile" notification. Indicator is hidden in collapsed type. Profile icon is hidden for collapsed type (only Android 12+).
- Change: Set native notification style for all devices with Android 12+.
- Change: added double arrow for passed sensor.
- Change: update dynamic shortcuts after profile parameters change.
- Change: do not show notification about not enabled accessibility service at PPP start.
- Change: generation of dynamic shortcuts are changed. Displayed are profiles in Quick Tiles.
- Change: airplane mode in profile. Added options for user to use root or assistant.
- Change: added special reason for check of preferences: two sim cards existence.
- Change: play notification for profile activation, event start end, restart events, end of duration.
- Change: smaller length of vibration.
- Change: moved news about new Extender version moved at top in "Important info"
- Change: immediately change notification after notification parameters change.
- Change: updated libraries versions.
- Fixed bad displayed dynamic shortcuts in Nova launcher.
- Fixed not working Order spinner in Editor.
- Fixed critical bug in default assistant support (for switch airplane mode) by e-amil from Google.
- Fixed Autostart for huawei devices.
- Fixed display of monochromatic widgets and application notification and widgets.
- Fixed check of accessibility service status.
- Fixed not working dark mode detection.
- Fixed displayed red text even if accessibility service enabled.
- Fixed displayed "Radios" section of profile when airplane mode is ON and device is rooted.
- Other fixes.
- Updated translations.
